<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Gioco del Triangolo</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      text-size-adjust: 100%;
    }

    h1 {
      font-size: clamp(22px, 6vw, 36px);
      margin-bottom: 6px;
    }

    p {
      font-size: clamp(14px, 4vw, 20px);
      margin: 3px;
    }

    canvas {
      background: #222;
      margin-top: 12px;
      cursor: pointer;
      max-width: 90vw;
      max-height: 90vw;
      touch-action: manipulation;
    }
  </style>
</head>

<body>

<h1>ðŸ”º Gioco del Triangolo</h1>
<p>Punteggio: <span id="score">0</span></p>
<p>Rinascite: <span id="rebirths">0</span></p>
<p>VelocitÃ : <span id="speed">1</span>x</p>

<canvas id="gameCanvas"></canvas>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  let size = 40;
  let score = 0;
  let rebirths = 0;

  let speed = 1;
  let autoGrow = 0.02;

  function drawTriangle() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "cyan";
    ctx.beginPath();
    ctx.moveTo(200, 200 - size);
    ctx.lineTo(200 - size, 200 + size);
    ctx.lineTo(200 + size, 200 + size);
    ctx.closePath();
    ctx.fill();
  }

  function isClickInsideTriangle(x, y) {
    return (
      x > 200 - size &&
      x < 200 + size &&
      y > 200 - size &&
      y < 200 + size
    );
  }

  function rebirth() {
    rebirths++;
    size = 40;
    speed += 0.5;
    autoGrow += 0.01;

    document.getElementById("rebirths").textContent = rebirths;
    document.getElementById("speed").textContent = speed.toFixed(1);
  }

  canvas.addEventListener("click", (e) => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    if (isClickInsideTriangle(x, y)) {
      score++;
      size += 1 * speed;

      if (score % 100 === 0) rebirth();

      document.getElementById("score").textContent = score;
      drawTriangle();
    }
  });

  function gameLoop() {
    size += autoGrow * speed;
    drawTriangle();
    requestAnimationFrame(gameLoop);
  }

  drawTriangle();
  gameLoop();
</script>

</body>
</html>
