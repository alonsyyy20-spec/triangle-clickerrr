<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">

<!-- BLOCCA ZOOM SU MOBILE / IPAD -->
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Gioco ðŸ”º</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
  touch-action: manipulation;
}

#game {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 30px;
}

/* SHOP A SINISTRA */
#shop {
  background: #222;
  padding: 15px;
  border-radius: 10px;
  width: 180px;
}

#shop h3 {
  margin-top: 0;
}

#shop button {
  width: 100%;
  margin-top: 10px;
  padding: 8px;
  font-size: 14px;
  border-radius: 6px;
  border: none;
}

/* TRIANGOLO */
#triangle {
  width: 0;
  height: 0;
  border-left: 60px solid transparent;
  border-right: 60px solid transparent;
  border-bottom: 120px solid cyan;
  user-select: none;
  -webkit-user-select: none;
}

/* INFO */
#info {
  position: fixed;
  top: 10px;
  right: 10px;
  background: #222;
  padding: 10px;
  border-radius: 10px;
  font-size: 14px;
}
</style>
</head>

<body>

<div id="game">

  <!-- SHOP -->
  <div id="shop">
    <h3>ðŸ›’ Shop</h3>
    <p>ðŸ’° Soldi: <span id="money">0</span></p>

    <button onclick="buyCoins()">+1 moneta / click (10ðŸ’°)</button>
    <button onclick="buyPoints()">+1 punto / click (20ðŸ’°)</button>
  </div>

  <!-- TRIANGOLO -->
  <div id="triangle"></div>

</div>

<!-- INFO -->
<div id="info">
  Punti: <span id="points">0</span><br>
  Rinascite: <span id="rebirths">0</span><br>
  VelocitÃ : <span id="speed">1.0</span><br>
  Prossima rinascita: <span id="goal">50</span>
</div>

<script>
/* STATO GIOCO */
let size = 120;
let points = 0;
let rebirths = 0;
let speed = 1;

let rebirthGoal = 50;

let money = 0;
let coinsPerClick = 1;
let pointsPerClick = 1;

const triangle = document.getElementById("triangle");

const colors = ["cyan", "yellow", "lime", "red", "orange", "pink", "violet"];

/* TRIANGOLO */
function updateTriangle() {
  triangle.style.borderLeft = (size / 2) + "px solid transparent";
  triangle.style.borderRight = (size / 2) + "px solid transparent";
  triangle.style.borderBottom =
    size + "px solid " + colors[Math.floor(Math.random() * colors.length)];
}

/* CLICK / TOUCH */
triangle.addEventListener("touchstart", clickTriangle);
triangle.addEventListener("click", clickTriangle);

function clickTriangle(e) {
  e.preventDefault();

  points += pointsPerClick;
  money += coinsPerClick;

  size += speed;

  updateTriangle();

  if (points >= rebirthGoal) {
    rebirth();
  }

  updateUI();
}

/* RINASCITA (PIÃ™ DIFFICILE OGNI VOLTA) */
function rebirth() {
  points = 0;
  size = 120;
  rebirths++;

  speed += 0.5;
  rebirthGoal *= 2; // DIFFICOLTÃ€ CHE AUMENTA
}

/* SHOP */
function buyCoins() {
  if (money >= 10) {
    money -= 10;
    coinsPerClick++;
    updateUI();
  }
}

function buyPoints() {
  if (money >= 20) {
    money -= 20;
    pointsPerClick++;
    updateUI();
  }
}

/* UI */
function updateUI() {
  document.getElementById("points").textContent = points;
  document.getElementById("rebirths").textContent = rebirths;
  document.getElementById("speed").textContent = speed.toFixed(1);
  document.getElementById("money").textContent = money;
  document.getElementById("goal").textContent = rebirthGoal;
}

/* START */
updateTriangle();
updateUI();
</script>

</body>
</html>
